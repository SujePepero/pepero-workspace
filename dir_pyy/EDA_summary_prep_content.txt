기본적인 EDA과정:
- 데이터 로딩
- 데이터 구조및 변수 이해(.info()): 10k rows, no NA, 
- 데이터 요약및 기술 통계(.describe())
- 결측치, 이상치
- 변수분포 시각화
- 변수관계 시각화
- 데이터 전처리, 변수분석, 상관관계 및 feature engineering
	a) hs4 와 item_id 간의 대응관계 (예시:  hs4 코드  = 2805 의 경우에 포함된 상품들: ['BSRMSVTC', 'DJBLNPNC', 'RCBZUSIM', 'SUOYXCHP', 'WQMVCOEM', 'ZKENOUDA'])
	
	b) => 각 hs4코드에 포함되는 item들 간에 correlation 조사.
		# ### top4_hs4        : top4_hs4=2811, 4개 아이템, ['DNMPSKTB' 'RJGPVEXX' 'VWMBASNE' 'WPQXWHYO']
		# ### top5_hs4(weak)  : top5_hs4=8102, 3개 아이템, ['FQCLOEXA' 'KEUWZRKO' 'UIFPPCLR']
		# ### top6_hs4        : top6_hs4=8505, 3개 아이템, ['GYHKIVQT' 'ROACSLMG' 'VBYCLTYZ']
		# ### top10_hs4(weak) : top10_hs4=2846, 2개 아이템, ['FRHNWLNI' 'MBSBZBXA']
		# ### top11_hs4    :  top11_hs4=3102, 2개 아이템, ['BTMOEMEP' 'LRVGFDFM']
	
hs4 코드별 복수로 포함된 아이템들간의 상관관계 확인
	
	c) seq 값에 따른 item들의  범주화: 40, 80을 기준으로 3 범주로 나눈다 ==> seq_cnt_low,  seq_cnt_mid,  seq_cnt_high
	d) seq_cnt_low,  seq_cnt_mid,  seq_cnt_high 범주내의 아이템들간 상관관계 조사:
	
	e) 공행성쌍 데이터
		- 한 item에 대한 following_item 갯수 분포
		- best_lag 분포
		- max_corr 분포
		
################################################

# 데이터 분석에 근거한 가정들
0. 전체 무역량 추세: 22년1월 ~ 25년7월: 전체 trend는 감소
1. weight과 value간에 양의 상관관계가 존재한다. -> 상관관계 기울기에 따른 클러스터링 -> categorization Feature Eng. candidate
2. hs4 간의 corr_mat (heatmap)에 튀는 조합들이 있다 (자기 자신을 제외하고도 corr>0.5)
    2.1. 전체 감소 trend에 상관관계
    2.2. 이전년도대비로 trend없앴을때 상관관계(주기성/계절성의 상관관계)
3. seq > 1인 무역품들이 인기상품(?)이다.
4. 같은 hs4에 속하는 item_id들중 제품들간에는 상관관계가 높은 조합이 있다(top1, top4, top5, top6, top10(weak), top11 hs4에 속한 아이텝. >0.4). 


# year : 전체 trend, 전체 데이터에서의 상관관계
# month : 이전 년도와 변화된량으로 상관관계(계절성/주기성)
# hs4 : 같은 범주(공통 중분류)에 속하는 제품간에 상관관계
# seq: 같은 범주(공통 구입횟수)에 속하는 제품간에 상관관계
# weight: categorization -> 같은 범주(weight-value기울기)에서의 상관관계 


#################################
#################################
#################################
1. 22~25년까지 년도별 전체 무역량이 감소하는 추세를 보였다.
2. 월별 무역량은 1월에 가장 무역량이 많았다.
3. 월별 무역 횟수는 1월, 12월이 많았다.
3. 상관관계 히트맵에서 트랜드를 제거하지 않을 경우 많은 변수들이 높은 상관관계를 보였고, 
전년 대비 성장률로 변환하여 트랜드 제거를 한 경우 무분별한 상관관계가 정리된 것을 볼 수 있었다.
4. 전체 상관관계 pair에서 소수의 높은 상관관계를 갖는 pair를 필터링해야할 필요가 있다.
5. hs4의 code의 실제 분류명을 확인하여 아이템간의 유사성을 직접 판단할 수 있다.(원자재 <-> 완제품)
6. weight과 value간의 관계는 단일정규분포가 아닌 4개의 클러스터가 존재했고,
클러스터링을 통해 클러스터 안의 변수들간에 상관관계를 확인할 필요가 있었다.
(각 클러스터는 리니어한 value, weight의 상관관계를 보이고 있다.)

7. 각 상관관계들이 실제로 관련이 있는 지 케이스별로 확인할 필요가 있었다.
8. 무역 거래 횟수에 따른 아이템들의 범주화가 가능했고, 각 범주에 포함되는 아이템들간의
상관관계를 조사할 필요가 있었다.
9.  공행성쌍 데이터 분포는 기준 아이템에 대한 공행성이 있는 아이템들의 갯수 분포는 우하향 패턴을 보였다.
공행성쌍 데이터의 최적 lag는 균등하게 분포되어있다.
10. 공생성쌍간의 상관관계는 우하향성을 보인다.


###### ==> gemini의 요약
🚀 무역 데이터 탐색적 데이터 분석(EDA) - 주요 발견 사항
본 문서는 제공된 무역 데이터의 EDA를 통해 도출된 핵심 인사이트를 요약합니다. 분석의 주 목적은 '블랙박스' 데이터의 내재된 규칙과 패턴을 식별하여, 향후 예측 모델링의 기반을 마련하는 것이었습니다.
1. 거시적 무역 패턴 (Macro-Level Trends)
데이터의 전체적인 흐름과 계절성을 파악했습니다.
• 전체 추세: 2022년부터 2025년까지 연도별 전체 무역량(value)은 감소하는 추세를 보였습니다.
• 월별 계절성: 월별 무역량(value)은 1월에 가장 높게 나타났으며, 무역 **횟수(Count)**는 연초(1월)와 연말(12월)에 집중되는 경향을 확인했습니다.
2. '가짜 상관관계' 식별 및 트렌드 제거
시계열 데이터의 함정을 피하고 '진짜' 관계를 식별하는 것이 중요했습니다.
• 문제점: 트렌드를 제거하지 않은 원본 데이터로 상관관계를 분석한 결과, 대부분의 변수가 **'가짜 상관관계(Spurious Correlation)'**로 인해 높게 나타났습니다.
• 해결책: '전년 대비 성장률'로 데이터를 변환하여 시계열 트렌드를 제거하자, 무분별했던 상관관계가 정리되었고 '진짜' 관계를 식별할 기반이 마련되었습니다.
• 필요성: 전체 상관관계 Pair 중, 소수의 유의미하게 높은 상관관계를 갖는 Pair를 필터링하는 전략이 필요함을 확인했습니다.
3. 주요 변수(Feature) 특성 및 클러스터링
데이터의 분포와 개별 변수 간의 관계를 파악했습니다.
• Value-Weight 관계: value와 weight 간의 관계는 단일 정규분포가 아닌, 4개의 뚜렷한 클러스터로 구분되었습니다. 각 클러스터는 내부적으로 선형적인 상관관계를 보였습니다.
• 아이템 범주화: 무역 거래 횟수를 기준으로 아이템을 '핵심/주기성/비주기성' 등으로 범주화할 수 있었으며, 이는 그룹별 특화 분석의 가능성을 시사합니다.
4. 공행성(Co-movement) 및 시차(Lag) 관계 분석
품목 간의 '움직임'을 분석하여 예측의 핵심 단서를 탐색했습니다.
• 품목명(Domain) 활용: hs4 코드를 실제 분류명과 매핑하여, 통계적으로 유의미한 관계가 **'원자재-완제품'**과 같은 실제 산업적 연관성에 기인하는지 검증할 수 있었습니다.
• '허브' 품목의 존재: 공행성 쌍의 분포는 '기준 아이템' 대비 '공행성 아이템'의 개수가 **우하향(롱테일)**하는 패턴을 보였습니다. 이는 소수의 '핵심 품목'이 다수의 품목과 관계를 맺고 있음을 의미합니다.
• '선행/후행' 관계의 다양성: '최적 시차(best lag)'는 특정 값에 쏠리지 않고 균등하게 분포되어, 품목 간에 다양한 '선행/후행' 관계가 존재함을 확인했습니다. (예: 1달 선행, 4달 선행 등)
• 관계의 희소성: 공행성 쌍 간의 상관관계 분포 역시 우하향하며, 대부분의 관계는 약하고 소수의 '강력한 관계'가 존재함을 재확인했습니다.

##### ==> 역시 막상막하의 chatGPT
# 기대 효과

# 무역 데이터 EDA 기반 기대효과

## 1. **신뢰도 높은 예측 모델 구축 기반 마련**

- 시계열 트렌드 제거를 통해 가짜 상관관계를 제거하여,
    
    실제적으로 의미 있는 변수와 관계만을 입력 변수로 사용할 수 있음.
    
- 전년 대비 성장률 기반의 변환은 시계열 안정성을 확보해
    
    ARIMA / LSTM / Prophet 등 예측모델 정확도를 크게 향상시키는 기반 제공.
    
- 아이템별 클러스터가 명확하여, **품목별 맞춤형 예측 모델** 설계 가능.

---

## 2. **고부가가치 품목 및 전략 품목 발굴**

- 공행성 분석을 통해 다수 품목과 연결된 **허브(Hub) 품목**을 식별할 수 있어
    
    국가·기업 관점에서 전략적 집중투자 대상 품목을 선정할 수 있음.
    
- 관계 강도가 높은 ‘원자재⟷완제품’ Pair는 공급망 매핑에도 활용 가능.

---

## 3. **수요·공급 변화 조기 감지(Leading Indicator 활용)**

- ‘선행/후행(Lag)’ 정보를 통해 특정 품목의 변화가 **다른 품목 변화의 선행지표**로 사용 가능.
    - 예: 특정 원자재의 증가 → 2~3개월 뒤 완제품 증가 예상
- 이는 물류, 재고, 생산 계획을 선행적으로 조정하는 데 활용 가능.

---

## 4. **품목별 맞춤 정책 및 그룹 전략 수립**

- Value–Weight 클러스터링을 통해 품목을
    
    **고가·저중량 / 저가·중량 / 대량·저가** 등 구조별로 분리해
    
    품목군별 다른 가격정책, 물류 전략, 무역 정책 수립 가능.
    
- 거래 횟수 기반 범주화(핵심/주기성/비주기성)는
    
    **주요 산업군 파악, 시장 모니터링 빈도 설정** 등에 활용 가능.
    

---

## 5. **이상거래 탐지 및 리스크 관리 강화**

- 정상적인 Value–Weight, 월별 계절성 패턴이 파악됨으로써
    
    범주를 벗어난 거래를 이상탐지하는 기준이 정교해짐.
    
- 공행성이 약한 품목의 갑작스러운 상승/하락은
    
    **리스크 알림 시스템** 트리거로 사용 가능.
    

---

## 6. **무역 생태계 구조 이해 및 산업적 인사이트 강화**

- hs4 코드와 실제 품목명 매핑을 통한 분석으로
    
    **산업 Supply Chain 구조를 데이터 기반으로 시각화**할 수 있음.
    
- ‘원자재→부품→완제품’ 흐름을 **정량적 상관·시차**로 밝혀
    
    산업 정책/기획/전략에 바로 활용 가능.
    

---

## 7. **데이터 기반 의사결정 체계 고도화**

- 블랙박스 형태의 무역 데이터였던 것을
    
    구조화된 상관 네트워크, 허브 구조, 클러스터 구조로 해석 가능하게 만들었음.
    
- 이를 기반으로:
    - 관세 정책 지원
    - 특정 산업군 모니터링 자동화
    - 수출입 타이밍 판단
    - 조기 경보 시스템 구축
        
        등이 모두 가능해짐.
